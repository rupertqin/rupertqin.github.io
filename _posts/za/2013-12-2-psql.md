---
layout: post
title:  "Psql"
tags: za
---

[app-psql](http://www.postgresql.org/docs/9.3/interactive/app-psql.html)  
[app-pg-ctl](http://www.postgresql.org/docs/9.3/static/app-pg-ctl.html)  
[postgresapp documentation](http://postgresapp.com/documentation)

## command in psql
`\?` to see all command
`\list` or `\l` lists all databases
`\dt` or `\d` lists all tables in the current database

## enter psql
`psql basename`

## quit psql
`\q`

## postgresql - can't create database - OperationalError: source database “template1” is being accessed by other users
[stackoverflow](http://stackoverflow.com/questions/14374726/postgresql-cant-create-database-operationalerror-source-database-template)  
I use `postgres.app`, so I restart it to solve it.

## start server (install via brew)
**1:** 

see the info via `brew info postgresql`

To have launchd start postgresql at login:

`ln -sfv /usr/local/opt/postgresql/*.plist ~/Library/LaunchAgents`

Then to load postgresql now:

`launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist`

Or, if you don't want/need launchctl, you can just run:

`postgres -D /usr/local/var/postgres`

**2:** 

[how to start postgresql server on mac os x](http://stackoverflow.com/questions/7975556/)

Start manually:

`pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start`

Stop manually:

`pg_ctl -D /usr/local/var/postgres stop -s -m fast`

## start & stop postgres (postgresql.app)
do this `pg_ctl -D data/directory start`, in my case, I do as below:  
`pg_ctl -D ~/Library/Application\ Support/Postgres93/var start`
by set the pgsql environment variable to `.zshrc`  
`export PGDATA="$HOME/Library/Application Support/Postgres93/var$PGDATA"`  
can use `pg_ctl start` `pg_ctl stop`

## rolse
[Database Roles](http://www.postgresql.org/docs/9.3/static/database-roles.html)

`CREATE ROLE name;`  
`DROP ROLE name;`

`createuser name`  
`dropuser name`

list all rolse:  
`SELECT rolname FROM pg_roles;`  
`\du`