---
layout: post
title:  git
tags: za git
---

## Resource
[Git Community Book 中文版](http://gitbook.liuhui998.com/)
[Pro Git ](http://git-scm.com/book)

## Delete a Git branch both locally and in GitHub
Delete a **remote** branch:  
`git push origin --delete <branchName>`
  
`git push origin :<branchName>`  

To remove a **local branch** from your machine:  

`git branch -d the_local_branch`

## Push local branch to remote
[why-do-i-need-to-do-set-upstream-all-the-time](http://stackoverflow.com/questions/6089294/)

**`git push -u origin <branchName>`**

`git push -u origin <branchName>` = `git push origin <branchName>` + `git branch --set-upstream-to origin/my_branch`

`git branch --set-upstream-to origin/my_branch` = `git branch -u origin/my_branch`

## Pull remote branch to local
`git checkout -b <localName> origin/<remoteName>`

## Example: pull then merge into another branch
my local 2 brach: **dev** **work**  
my working branch : **work**  
then I need to pull some new code from dev then merge into branch **work**  

``` bash
on **work**: g stash  
on **work**: gco dev  
on **dev**: gl --rebase  
on **dev**: gco work  
on **work**: g rebase dev  
on **work**: g stash pop
```

## recover current changes
this recover current changes but do nothing with a commit  
__`git checkout -f`__  

PS: `git reset head~` will undo a head commit, but recover nothing.

## add or edit a remote url
[How to change a remote repository URI using Git?](http://stackoverflow.com/questions/2432764)

via command:  

**add:** `git remote add origin ssh://newhost.com/usr/local/gitroot/myproject.git`

**set:** `git remote set-url origin ssh://newhost.com/usr/local/gitroot/newproject.git`

Check your local `repo-folder/.git/config` file for:

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = https://user:password@code.google.com/p/project-name/
```

## git diff commit

`git log`

then find commit version string in such:

```bash
commit 48c47872e21283ec483b65a85cba7dac07dd60e0
Author: rup <uglysoul@foxmail.com>
Date:   Thu Jan 23 01:14:38 2014 +0800

    update post
```

then show target version with current HEAD:

`git diff 48c47872e21283ec483b65a85cba7dac07dd60e0 HEAD`

or previous version with previous' previous version:

`git diff HEAD~1 HEAD~2`

or compare with commit string:

`git diff 48c47872e21283ec483b65a85cba7dac07dd60e0 f28a263731d3bd492a839037cbca4f12afcfcef4`

or 

`git diff HEAD~2 f28a263731d3bd492a839037cbca4f12afcfcef4`

between branchs:

`git diff master dev`
